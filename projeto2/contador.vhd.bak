------------------------------------------------
-- Design: contador
-- Entity: contador
-- Author: Diogo & George
-- Rev.  : 1.0
-- Date  : 06/19/2020
------------------------------------------------

LIBRARY ieee;
USE ieee.std_logic_1164.ALL;
USE ieee.STD_LOGIC_UNSIGNED.ALL;

ENTITY contador IS
  PORT (
    i_PC_CLR : IN std_logic; -- clear/reset
    i_CLK    : IN std_logic; -- clock
    i_TIME   : IN std_logic; -- enable 	 
    o_PC     : OUT std_logic_vector(15 DOWNTO 0); -- data output
	 o_SINAL  : out std_logic)
  );
END contador;
ARCHITECTURE rtl OF contador IS

  SIGNAL w_COUNTER : std_logic_vector(15 DOWNTO 0);
  SIGNAL w_SINAL   : std_logic;
BEGIN

  PROCESS (i_PC_CLR, i_CLK)
  BEGIN
    IF (i_PC_CLR = '1') THEN
      w_COUNTER <= "0000000000000000";
    ELSIF (rising_edge(i_CLK)) THEN
      IF (w_COUNTER < i_TIME) THEN
        w_COUNTER <= w_COUNTER + "1";
		  w_SINAL   <= "0";
		else
		  w_COUNTER <= "0000000000000000";
		  w_SINAL   <= "1";
      END IF;
    END IF;
  END PROCESS;
  o_SINAL <= w_SINAL;
  o_PC    <= w_COUNTER;

END rtl;